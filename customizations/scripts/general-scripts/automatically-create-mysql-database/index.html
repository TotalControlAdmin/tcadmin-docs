<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2 docs-doc-page docs-doc-id-customizations/scripts/general-scripts/automatically-create-mysql-database" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Automatically Create a MySQL Database | TCAdmin Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.tcadmin.com/img/tcadmin-logo.png"><meta data-rh="true" name="twitter:image" content="https://docs.tcadmin.com/img/tcadmin-logo.png"><meta data-rh="true" property="og:url" content="https://docs.tcadmin.com/customizations/scripts/general-scripts/automatically-create-mysql-database"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2"><meta data-rh="true" name="docsearch:version" content="2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2"><meta data-rh="true" property="og:title" content="Automatically Create a MySQL Database | TCAdmin Documentation"><meta data-rh="true" name="description" content="Rather than utilizing these legacy scripts, we advise installing the MySQL Manager module for optimal results."><meta data-rh="true" property="og:description" content="Rather than utilizing these legacy scripts, we advise installing the MySQL Manager module for optimal results."><link data-rh="true" rel="icon" href="/img/cropped-tcadmin-favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://docs.tcadmin.com/customizations/scripts/general-scripts/automatically-create-mysql-database"><link data-rh="true" rel="alternate" href="https://docs.tcadmin.com/customizations/scripts/general-scripts/automatically-create-mysql-database" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tcadmin.com/customizations/scripts/general-scripts/automatically-create-mysql-database" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Customizations","item":"https://docs.tcadmin.com/category/customizations"},{"@type":"ListItem","position":2,"name":"Scripts","item":"https://docs.tcadmin.com/category/scripts"},{"@type":"ListItem","position":3,"name":"General Scripts","item":"https://docs.tcadmin.com/category/general-scripts"},{"@type":"ListItem","position":4,"name":"Automatically Create a MySQL Database","item":"https://docs.tcadmin.com/customizations/scripts/general-scripts/automatically-create-mysql-database"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="TCAdmin Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.8fc0290c.css">
<script src="/assets/js/runtime~main.ccf76f86.js" defer="defer"></script>
<script src="/assets/js/main.c5ed23da.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/tcadmin-logo.png" alt="TCAdmin Docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/TCAdmin_White.png" alt="TCAdmin Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/customizations/scripts/general-scripts/automatically-create-mysql-database">V2</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/TotalControlAdmin/tcadmin-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.com/invite/ptN2pGf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord"></a><a href="https://www.tcadmin.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-website-link" aria-label="TCAdmin Website"></a><a href="https://clients.tcadmin.com/billing/clientarea.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-billing-link" aria-label="Client Area"></a><a href="https://community.tcadmin.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-forum-link" aria-label="Community Forum"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/using-tcadmin"><span title="Using TCAdmin" class="categoryLinkLabel_W154">Using TCAdmin</span></a><button aria-label="Expand sidebar category &#x27;Using TCAdmin&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/misc"><span title="Misc" class="categoryLinkLabel_W154">Misc</span></a><button aria-label="Expand sidebar category &#x27;Misc&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/database"><span title="Database" class="categoryLinkLabel_W154">Database</span></a><button aria-label="Expand sidebar category &#x27;Database&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/category/customizations"><span title="Customizations" class="categoryLinkLabel_W154">Customizations</span></a><button aria-label="Collapse sidebar category &#x27;Customizations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/sdk-documentations"><span title="SDK Documentation" class="linkLabel_WmDU">SDK Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/mail-templates"><span title="Mail Templates" class="linkLabel_WmDU">Mail Templates</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/category/scripts"><span title="Scripts" class="categoryLinkLabel_W154">Scripts</span></a><button aria-label="Collapse sidebar category &#x27;Scripts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/category/general-scripts"><span title="General Scripts" class="categoryLinkLabel_W154">General Scripts</span></a><button aria-label="Collapse sidebar category &#x27;General Scripts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/allow-user-to-change-exe"><span title="Allow User to Change the Exe" class="linkLabel_WmDU">Allow User to Change the Exe</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/allow-user-to-change-slots"><span title="Allow User to Change Slots" class="linkLabel_WmDU">Allow User to Change Slots</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/customizations/scripts/general-scripts/automatically-create-mysql-database"><span title="Automatically Create a MySQL Database" class="linkLabel_WmDU">Automatically Create a MySQL Database</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/backup-restore-scripts"><span title="Backup &amp; Restore Scripts" class="linkLabel_WmDU">Backup &amp; Restore Scripts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/backup-restore-scripts-with-ftp-support"><span title="Backup &amp; Restore Scripts with FTP Support" class="linkLabel_WmDU">Backup &amp; Restore Scripts with FTP Support</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/check-slots-ip-ports-in-config-file-before-starting"><span title="Check slots, ip and port in config file before starting" class="linkLabel_WmDU">Check slots, ip and port in config file before starting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/custom-login-form"><span title="Custom Login Form" class="linkLabel_WmDU">Custom Login Form</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/install-mod-from-whmcs"><span title="Install mod from WHMCS" class="linkLabel_WmDU">Install mod from WHMCS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/kill-all-processes-running-from-the-game-servers-root-folder"><span title="Kill all processes running from the game server&#x27;s root folder" class="linkLabel_WmDU">Kill all processes running from the game server&#x27;s root folder</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/limits-services-disk-space"><span title="Limit Service&#x27;s Disk Space" class="linkLabel_WmDU">Limit Service&#x27;s Disk Space</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/open-close-ports-in-windows-firewall"><span title="Open and close ports in Windows firewall" class="linkLabel_WmDU">Open and close ports in Windows firewall</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/restart-service-if-used-more-than-x-cpu-mem"><span title="Restart service if used more than x cpu or memory for the last 3 queries" class="linkLabel_WmDU">Restart service if used more than x cpu or memory for the last 3 queries</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/restart-service-when-last-player-disconnects"><span title="Restart service when last player disconnects" class="linkLabel_WmDU">Restart service when last player disconnects</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/stop-service-after-empty-for-2-days"><span title="Restart service when last player disconnects" class="linkLabel_WmDU">Restart service when last player disconnects</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/scripts/general-scripts/update-ip-and-in-whmcs"><span title="Update IP and port in WHMCS" class="linkLabel_WmDU">Update IP and port in WHMCS</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/ironpython"><span title="IronPython" class="categoryLinkLabel_W154">IronPython</span></a><button aria-label="Expand sidebar category &#x27;IronPython&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/custom-protocols"><span title="Custom Protocols" class="categoryLinkLabel_W154">Custom Protocols</span></a><button aria-label="Expand sidebar category &#x27;Custom Protocols&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/script-objects"><span title="Script Objects" class="categoryLinkLabel_W154">Script Objects</span></a><button aria-label="Expand sidebar category &#x27;Script Objects&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/themes"><span title="Themes" class="categoryLinkLabel_W154">Themes</span></a><button aria-label="Expand sidebar category &#x27;Themes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/languages"><span title="Languages" class="linkLabel_WmDU">Languages</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/modules"><span title="Modules" class="categoryLinkLabel_W154">Modules</span></a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/category/web-server-configurations"><span title="Web Server Configurations" class="categoryLinkLabel_W154">Web Server Configurations</span></a><button aria-label="Expand sidebar category &#x27;Web Server Configurations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/customizations/live-stats"><span title="Live Stats" class="linkLabel_WmDU">Live Stats</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/billing-api"><span title="Billing API" class="categoryLinkLabel_W154">Billing API</span></a><button aria-label="Expand sidebar category &#x27;Billing API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/faq"><span title="FAQ" class="categoryLinkLabel_W154">FAQ</span></a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/customizations"><span>Customizations</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/scripts"><span>Scripts</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/general-scripts"><span>General Scripts</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Automatically Create a MySQL Database</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automatically Create a MySQL Database</h1></header>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Use MySQL Manager</div><div class="admonitionContent_BuS1"><p>Rather than utilizing these legacy scripts, we advise installing the MySQL Manager module for optimal results.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="preparing-the-server">Preparing the server<a href="#preparing-the-server" class="hash-link" aria-label="Direct link to Preparing the server" title="Direct link to Preparing the server" translate="no">​</a></h2>
<ul>
<li class="">Install the MySQL server on your server.</li>
<li class="">Install phpMyAdmin if you want to provide a way to manage the database.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configure-the-game">Configure the game<a href="#configure-the-game" class="hash-link" aria-label="Direct link to Configure the game" title="Direct link to Configure the game" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-variables">Create variables<a href="#create-variables" class="hash-link" aria-label="Direct link to Create variables" title="Direct link to Create variables" translate="no">​</a></h3>
<ul>
<li class="">Configure variables for the MySQL user and password. Go to <code>Settings</code> &gt; <code>Global Variables</code> or <code>Settings</code> &gt; <code>Games</code> &gt; <code>Select the game</code> &gt; <code>Variables</code>. Create 2 new variables<!-- -->
<ul>
<li class="">Name: <code>MySQLUser</code></li>
<li class="">Preserve value: <code>Checked</code></li>
<li class="">Name: <code>MySQLPassword</code></li>
<li class="">Preserve value: <code>Checked</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-the-scripts">Create the scripts<a href="#create-the-scripts" class="hash-link" aria-label="Direct link to Create the scripts" title="Direct link to Create the scripts" translate="no">​</a></h3>
<ul>
<li class="">Go to <code>Settings</code> &gt; <code>Global Scripts</code> or <code>Settings</code> &gt; <code>Games</code> &gt; <code>Select the game</code> &gt; <code>Custom Scripts</code>. Add the following scripts. They will create the database and user when the service is created and delete them when the service is deleted. Make sure you update the value of mysql_password in all of the scripts.</li>
<li class="">If you are using MySQL 8 remove the MySQL 5 command and uncomment the MySQL 8 commands.</li>
<li class="">These scripts work without any additional changes if MySQL is installed on all servers (master and remotes). If you have a single MySQL server where all remotes connect you will have to change user@localhost to user@% in the user commands and configure your root user to allow connections from all IPs.</li>
</ul>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Generate MySQL user and password<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> Before created<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SDK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Misc </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Random</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;db{0}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ServiceId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Random</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RandomString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Create MySQL database and user<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> After created<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.DatabaseProviders.MySql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DatabaseProviders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_root</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapeduser</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapedpass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_root</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP DATABASE IF EXISTS {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM mysql.user WHERE user=&#x27;{0}&#x27; AND host=&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP USER {0}@&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CREATE DATABASE {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## MYSQL 5 SYNTAX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GRANT ALL PRIVILEGES ON {0}.* TO &#x27;{0}&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;{1}&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapedpass</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## MYSQL 8 SYNTAX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#mysql.ExecuteNonQuery(String.Format(&quot;CREATE USER &#x27;{0}&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;{1}&#x27;;&quot;, escapeduser, escapedpass));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#mysql.ExecuteNonQuery(String.Format(&quot;GRANT ALL PRIVILEGES ON {0}.* TO &#x27;{0}&#x27;@&#x27;localhost&#x27;;&quot;, escapeduser));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Add these lines  to the &quot;Create MySQL database and user&quot; script if you want to execute a .sql file </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};Database={1};User Id= {1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ImportDatabase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RootDirectory </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;db.sql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Delete MySQL database and user<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> Before deleted<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.DatabaseProviders.MySql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DatabaseProviders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_root</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Empty</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapeduser</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_root</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP DATABASE IF EXISTS {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM mysql.user WHERE user=&#x27;{0}&#x27; AND host=&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP USER {0}@&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-the-custom-link-to-phpmyadmin">Create the custom link to phpMyadmin<a href="#create-the-custom-link-to-phpmyadmin" class="hash-link" aria-label="Direct link to Create the custom link to phpMyadmin" title="Direct link to Create the custom link to phpMyadmin" translate="no">​</a></h3>
<ul>
<li class="">If you installed phpMyAdmin you can create a custom link. Go back to the game&#x27;s main settings. Click on the Custom Links icon. Add a new link with these values:<!-- -->
<ul>
<li class="">Name: <code>phpMyAdmin</code></li>
<li class="">Description: <code>Manage your database with phpMyAdmin</code></li>
<li class="">Url:<code> http://$[Service.IpHostname]/phpMyAdmin/index.php?pma_username=![MySQLUser]&amp;pma_password=![MySQLPassword] (you can also use https://phpmyadmin.tcadmin.com)</code></li>
<li class="">Icon URL: <code>~/App_Themes/Default/Images/ControlPanel/MenuIcons/Base/Database.png</code></li>
<li class="">Open in a new window: <code>Checked</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>update</div><div class="admonitionContent_BuS1"><p>Newer phpMyAdmin versions don&#x27;t allow logging in to mysql with the username/password in the url. <a href="https://www.phpmyadmin.net/files/4.9.0.1/" target="_blank" rel="noopener noreferrer" class="">https://www.phpmyadmin.net/files/4.9.0.1/</a></p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-the-mysql-variables-in-templates">Using the MySQL variables in templates<a href="#using-the-mysql-variables-in-templates" class="hash-link" aria-label="Direct link to Using the MySQL variables in templates" title="Direct link to Using the MySQL variables in templates" translate="no">​</a></h3>
<p>You can use the following variables in your mail and config file templates:</p>
<ul>
<li class=""><strong><code>![MySQLUser]</code></strong></li>
<li class=""><strong><code>[MySQLPassword]</code></strong></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="optional-scripts">Optional scripts<a href="#optional-scripts" class="hash-link" aria-label="Direct link to Optional scripts" title="Direct link to Optional scripts" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="icon-to-change-mysql-password">Icon to Change MySQL Password<a href="#icon-to-change-mysql-password" class="hash-link" aria-label="Direct link to Icon to Change MySQL Password" title="Direct link to Icon to Change MySQL Password" translate="no">​</a></h4>
<p>Create a variable named NewMySQLPassword. with:</p>
<ul>
<li class="">These options checked: &quot;Script parameter&quot;, &quot;Save script parameter value&quot;, &quot;Admin access&quot;, &quot;Sub admin access&quot;, &quot;Reseller access&quot;, &quot;User access&quot;, &quot;Server owner access&quot;, &quot;Value is required&quot;</li>
<li class="">Label=New Password</li>
<li class="">Mode=Password</li>
<li class="">Deny Characters=;&amp;&quot;&#x27;/</li>
</ul>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Change MySQL Password<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> Custom Icon<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.DatabaseProviders.MySql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DatabaseProviders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_root</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapeduser</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapedpass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapednewpass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;NewMySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_root</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SET PASSWORD FOR &#x27;{0}&#x27;@&#x27;localhost&#x27; = PASSWORD(&#x27;{1}&#x27;);&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapednewpass</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;FLUSH PRIVILEGES;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;NewMySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;NewMySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WriteToConsole</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Your password has been updated successfully.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WriteToConsole</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="backup-the-database-when-the-service-is-moved-and-restore-it-on-the-new-server">Backup the database when the service is moved and restore it on the new server<a href="#backup-the-database-when-the-service-is-moved-and-restore-it-on-the-new-server" class="hash-link" aria-label="Direct link to Backup the database when the service is moved and restore it on the new server" title="Direct link to Backup the database when the service is moved and restore it on the new server" translate="no">​</a></h3>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Backup MySQL database before moving<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> Before move<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.DatabaseProviders.MySql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DatabaseProviders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IO </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> FileStream</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FileMode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FileAccess</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_root</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backupfile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Combine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RootDirectory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_backup.sql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapeduser</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapedpass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AutoDisconnect </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_root</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#only make a backup if database exists and has tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SHOW DATABASES LIKE &#x27;{0}&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;USE {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SHOW TABLES;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> FileStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backupfile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FileMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Create</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FileAccess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Write</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DumpDatabase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP DATABASE IF EXISTS {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM mysql.user WHERE user=&#x27;{0}&#x27; AND host=&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP USER &#x27;{0}&#x27;@&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Operating System:</strong> Any<br>
<strong>Description:</strong> Restore MySQL database after move<br>
<strong>Script Engine:</strong> IronPython<br>
<strong>Event:</strong> After move<br>
<strong>Ignore execution errors:</strong> Unchecked<br>
<!-- -->Script:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> clr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.DatabaseProviders.MySql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TCAdmin.SDK&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> TCAdmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DatabaseProviders</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IO </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> File</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_server</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_root</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Script</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backupfile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Combine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RootDirectory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_backup.sql&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapeduser</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> escapedpass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PrepareSqlValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_root</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_password</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP DATABASE IF EXISTS {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM mysql.user WHERE user=&#x27;{0}&#x27; AND host=&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Count </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DROP USER &#x27;{0}&#x27;@&#x27;localhost&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## MYSQL 5 SYNTAX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CREATE DATABASE {0};&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExecuteNonQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GRANT ALL PRIVILEGES ON {0}.* TO &#x27;{0}&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;{1}&#x27;;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapeduser</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> escapedpass</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## MYSQL 8 SYNTAX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#mysql.ExecuteNonQuery(String.Format(&quot;CREATE USER &#x27;{0}&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;{1}&#x27;;&quot;, escapeduser, escapedpass));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#mysql.ExecuteNonQuery(String.Format(&quot;GRANT ALL PRIVILEGES ON {0}.* TO &#x27;{0}&#x27;@&#x27;localhost&#x27;;&quot;, escapeduser)); </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> File</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Exists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backupfile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> MySqlManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> mysql2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisableReplication</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Data Source={0};Database={1};User Id={1};Password={2};Pooling=False;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mysql_server</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLUser&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ThisService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MySQLPassword&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mysql2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ImportDatabase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backupfile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backupfile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/versioned_docs/version-2/customizations/scripts/general-scripts/automatically-create-mysql-database.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-05T15:57:36.000Z" itemprop="dateModified">Feb 5, 2026</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/customizations/scripts/general-scripts/allow-user-to-change-slots"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Allow User to Change Slots</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/customizations/scripts/general-scripts/backup-restore-scripts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Backup &amp; Restore Scripts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparing-the-server" class="table-of-contents__link toc-highlight">Preparing the server</a></li><li><a href="#configure-the-game" class="table-of-contents__link toc-highlight">Configure the game</a><ul><li><a href="#create-variables" class="table-of-contents__link toc-highlight">Create variables</a></li><li><a href="#create-the-scripts" class="table-of-contents__link toc-highlight">Create the scripts</a></li><li><a href="#create-the-custom-link-to-phpmyadmin" class="table-of-contents__link toc-highlight">Create the custom link to phpMyadmin</a></li><li><a href="#using-the-mysql-variables-in-templates" class="table-of-contents__link toc-highlight">Using the MySQL variables in templates</a></li><li><a href="#optional-scripts" class="table-of-contents__link toc-highlight">Optional scripts</a></li><li><a href="#backup-the-database-when-the-service-is-moved-and-restore-it-on-the-new-server" class="table-of-contents__link toc-highlight">Backup the database when the service is moved and restore it on the new server</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 TCADMIN.COM, ALL RIGHTS RESERVED.</div></div></div></footer></div>
</body>
</html>