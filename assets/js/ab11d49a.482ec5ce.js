"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[3289],{3905:(e,n,t)=>{t.d(n,{Zo:()=>_,kt:()=>T});var o=t(7294);function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){E(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,E=function(e,n){if(null==e)return{};var t,o,E={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(E[t]=e[t]);return E}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(E[t]=e[t])}return E}var c=o.createContext({}),i=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},_=function(e){var n=i(e.components);return o.createElement(c.Provider,{value:n},e.children)},l="mdxType",I={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},L=o.forwardRef((function(e,n){var t=e.components,E=e.mdxType,a=e.originalType,c=e.parentName,_=s(e,["components","mdxType","originalType","parentName"]),l=i(t),L=E,T=l["".concat(c,".").concat(L)]||l[L]||I[L]||a;return t?o.createElement(T,r(r({ref:n},_),{},{components:t})):o.createElement(T,r({ref:n},_))}));function T(e,n){var t=arguments,E=n&&n.mdxType;if("string"==typeof e||E){var a=t.length,r=new Array(a);r[0]=L;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[l]="string"==typeof e?e:E,r[1]=s;for(var i=2;i<a;i++)r[i]=t[i];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}L.displayName="MDXCreateElement"},2722:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>I,frontMatter:()=>a,metadata:()=>s,toc:()=>i});var o=t(7462),E=(t(7294),t(3905));const a={sidebar_position:3,sidebar_label:"Improve MySQL Connection Speed"},r="Improve MySQL Connection Speed",s={unversionedId:"database/improve-mysql-connection-speed",id:"database/improve-mysql-connection-speed",title:"Improve MySQL Connection Speed",description:"Disable name resolve",source:"@site/docs/database/improve-mysql-connection-speed.mdx",sourceDirName:"database",slug:"/database/improve-mysql-connection-speed",permalink:"/database/improve-mysql-connection-speed",draft:!1,editUrl:"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/database/improve-mysql-connection-speed.mdx",tags:[],version:"current",lastUpdatedAt:1693212227,formattedLastUpdatedAt:"Aug 28, 2023",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Improve MySQL Connection Speed"},sidebar:"tutorialSidebar",previous:{title:"MySQL Replication",permalink:"/database/mysql-replication"},next:{title:"Changed the MySQL Server or Password and TCAdmin can't Connect",permalink:"/database/changed-the-mysql-server-or-password-and-tcadmin-cant-connect"}},c={},i=[{value:"Disable name resolve",id:"disable-name-resolve",level:2},{value:"MySQL Query Cache",id:"mysql-query-cache",level:2},{value:"Change the tables to the InnoDB engine",id:"change-the-tables-to-the-innodb-engine",level:2},{value:"Increase the value of innodb_buffer_pool_size in my.ini",id:"increase-the-value-of-innodb_buffer_pool_size-in-myini",level:2}],_={toc:i},l="wrapper";function I(e){let{components:n,...t}=e;return(0,E.kt)(l,(0,o.Z)({},_,t,{components:n,mdxType:"MDXLayout"}),(0,E.kt)("h1",{id:"improve-mysql-connection-speed"},"Improve MySQL Connection Speed"),(0,E.kt)("h2",{id:"disable-name-resolve"},"Disable name resolve"),(0,E.kt)("p",null,'To improve MySQL connection speed or fix the "Server did not respond within the specified timeout interval" error add skip-name-resolve to your MySQL server\'s my.ini or my.cnf under ',"[mysqld]",". Then restart the MySQL server."),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre"},"[mysqld]\nskip-name-resolve\n")),(0,E.kt)("admonition",{type:"caution"},(0,E.kt)("p",{parentName:"admonition"},"Sometimes if you disable name resolve you lose the ability to log in with root@localhost. If this happens enable name resolve again and create ",(0,E.kt)("a",{parentName:"p",href:"mailto:root@127.0.0.1"},"root@127.0.0.1"))),(0,E.kt)("h2",{id:"mysql-query-cache"},"MySQL Query Cache"),(0,E.kt)("p",null,'If you have query cache enabled use MySQL Workbench to monitor your client connections. Set refresh to 0.5 seconds. If you see "waiting for query cache lock" every once in a while you might get better performance with query cache disabled.'),(0,E.kt)("h2",{id:"change-the-tables-to-the-innodb-engine"},"Change the tables to the InnoDB engine"),(0,E.kt)("p",null,"If you have a large database you can improve performance by changing your tables to the InnoDB engine. Execute these commands on your database:"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE tc_api_config ENGINE = InnoDB;\nALTER TABLE tc_company_info ENGINE = InnoDB;\nALTER TABLE tc_countries ENGINE = InnoDB;\nALTER TABLE tc_custom_variables ENGINE = InnoDB;\nALTER TABLE tc_datacenters ENGINE = InnoDB;\nALTER TABLE tc_datasource_fields ENGINE = InnoDB;\nALTER TABLE tc_dc_licenses ENGINE = InnoDB;\nALTER TABLE tc_default_variables ENGINE = InnoDB;\nALTER TABLE tc_dynamic_form_items ENGINE = InnoDB;\nALTER TABLE tc_dynamic_forms ENGINE = InnoDB;\nALTER TABLE tc_file_providers ENGINE = InnoDB;\nALTER TABLE tc_file_servers ENGINE = InnoDB;\nALTER TABLE tc_fileserver_reports ENGINE = InnoDB;\nALTER TABLE tc_game_bukkit_config ENGINE = InnoDB;\nALTER TABLE tc_game_cmdlines ENGINE = InnoDB;\nALTER TABLE tc_game_config_files ENGINE = InnoDB;\nALTER TABLE tc_game_fast_download ENGINE = InnoDB;\nALTER TABLE tc_game_general_config ENGINE = InnoDB;\nALTER TABLE tc_game_identity ENGINE = InnoDB;\nALTER TABLE tc_game_keys ENGINE = InnoDB;\nALTER TABLE tc_game_links ENGINE = InnoDB;\nALTER TABLE tc_game_mail_templates ENGINE = InnoDB;\nALTER TABLE tc_game_map_packs ENGINE = InnoDB;\nALTER TABLE tc_game_mods ENGINE = InnoDB;\nALTER TABLE tc_game_packages ENGINE = InnoDB;\nALTER TABLE tc_game_paths ENGINE = InnoDB;\nALTER TABLE tc_game_permissions ENGINE = InnoDB;\nALTER TABLE tc_game_ports ENGINE = InnoDB;\nALTER TABLE tc_game_protocols ENGINE = InnoDB;\nALTER TABLE tc_game_punkbuster_config ENGINE = InnoDB;\nALTER TABLE tc_game_query_monitoring ENGINE = InnoDB;\nALTER TABLE tc_game_scripts ENGINE = InnoDB;\nALTER TABLE tc_game_service_custom_cmdlines ENGINE = InnoDB;\nALTER TABLE tc_game_service_detailed_stats ENGINE = InnoDB;\nALTER TABLE tc_game_service_historical_stats ENGINE = InnoDB;\nALTER TABLE tc_game_service_live_stats ENGINE = InnoDB;\nALTER TABLE tc_game_service_workshop_files ENGINE = InnoDB;\nALTER TABLE tc_game_services ENGINE = InnoDB;\nALTER TABLE tc_game_spiget_config ENGINE = InnoDB;\nALTER TABLE tc_game_steam_config ENGINE = InnoDB;\nALTER TABLE tc_game_templates ENGINE = InnoDB;\nALTER TABLE tc_game_text_console ENGINE = InnoDB;\nALTER TABLE tc_game_tracker_config ENGINE = InnoDB;\nALTER TABLE tc_game_updates ENGINE = InnoDB;\nALTER TABLE tc_game_variables_config ENGINE = InnoDB;\nALTER TABLE tc_game_web_console ENGINE = InnoDB;\nALTER TABLE tc_games ENGINE = InnoDB;\nALTER TABLE tc_global_game_scripts ENGINE = InnoDB;\nALTER TABLE tc_info ENGINE = InnoDB;\nALTER TABLE tc_installed_plugins ENGINE = InnoDB;\nALTER TABLE tc_lang_datasource_fields ENGINE = InnoDB;\nALTER TABLE tc_lang_page_icons ENGINE = InnoDB;\nALTER TABLE tc_lang_panelbar_categories ENGINE = InnoDB;\nALTER TABLE tc_lang_properties ENGINE = InnoDB;\nALTER TABLE tc_lang_site_map ENGINE = InnoDB;\nALTER TABLE tc_languages ENGINE = InnoDB;\nALTER TABLE tc_mail_config ENGINE = InnoDB;\nALTER TABLE tc_mail_template_types ENGINE = InnoDB;\nALTER TABLE tc_mail_templates ENGINE = InnoDB;\nALTER TABLE tc_module_commands ENGINE = InnoDB;\nALTER TABLE tc_module_processes ENGINE = InnoDB;\nALTER TABLE tc_module_server_components ENGINE = InnoDB;\nALTER TABLE tc_modules ENGINE = InnoDB;\nALTER TABLE tc_object_required_permissions ENGINE = InnoDB;\nALTER TABLE tc_packages ENGINE = InnoDB;\nALTER TABLE tc_page_icon_categories ENGINE = InnoDB;\nALTER TABLE tc_page_icons ENGINE = InnoDB;\nALTER TABLE tc_panelbar_categories ENGINE = InnoDB;\nALTER TABLE tc_permission_categories ENGINE = InnoDB;\nALTER TABLE tc_permissions ENGINE = InnoDB;\nALTER TABLE tc_private_networks ENGINE = InnoDB;\nALTER TABLE tc_recurring_tasks ENGINE = InnoDB;\nALTER TABLE tc_role_permissions ENGINE = InnoDB;\nALTER TABLE tc_roles ENGINE = InnoDB;\nALTER TABLE tc_script_engines ENGINE = InnoDB;\nALTER TABLE tc_security ENGINE = InnoDB;\nALTER TABLE tc_server_enabled_components ENGINE = InnoDB;\nALTER TABLE tc_server_ips ENGINE = InnoDB;\nALTER TABLE tc_servers ENGINE = InnoDB;\nALTER TABLE tc_services ENGINE = InnoDB;\nALTER TABLE tc_site_map ENGINE = InnoDB;\nALTER TABLE tc_support_categories ENGINE = InnoDB;\nALTER TABLE tc_support_config ENGINE = InnoDB;\nALTER TABLE tc_support_ticket_attachments ENGINE = InnoDB;\nALTER TABLE tc_support_ticket_replies ENGINE = InnoDB;\nALTER TABLE tc_support_tickets ENGINE = InnoDB;\nALTER TABLE tc_task_categories ENGINE = InnoDB;\nALTER TABLE tc_task_steps ENGINE = InnoDB;\nALTER TABLE tc_tasks ENGINE = InnoDB;\nALTER TABLE tc_teamspeak_permissions ENGINE = InnoDB;\nALTER TABLE tc_teamspeak_servers ENGINE = InnoDB;\nALTER TABLE tc_teamspeak_service_snapshots ENGINE = InnoDB;\nALTER TABLE tc_teamspeak_services ENGINE = InnoDB;\nALTER TABLE tc_user_messages ENGINE = InnoDB;\nALTER TABLE tc_user_packages ENGINE = InnoDB;\nALTER TABLE tc_user_widgets ENGINE = InnoDB;\nALTER TABLE tc_usercontrols ENGINE = InnoDB;\nALTER TABLE tc_users ENGINE = InnoDB;\n")),(0,E.kt)("h2",{id:"increase-the-value-of-innodb_buffer_pool_size-in-myini"},"Increase the value of innodb_buffer_pool_size in my.ini"),(0,E.kt)("p",null,"Execute this query in your mysql server."),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT CEILING(Total_InnoDB_Bytes*1.6/POWER(1024,3)) RIBPS FROM\n(SELECT SUM(data_length+index_length) Total_InnoDB_Bytes\nFROM information_schema.tables WHERE engine='InnoDB') A;\n")),(0,E.kt)("p",null,"Set that value in my.ini in gigabytes. For example if it returns 5 update the value of innodb_buffer_pool_size like this:"),(0,E.kt)("pre",null,(0,E.kt)("code",{parentName:"pre"},"innodb_buffer_pool_size=5G\n")))}I.isMDXComponent=!0}}]);