"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[9863],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=d(n),f=o,u=c["".concat(l,".").concat(f)]||c[f]||p[f]||a;return n?r.createElement(u,s(s({ref:t},m),{},{components:n})):r.createElement(u,s({ref:t},m))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=f;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var d=2;d<a;d++)s[d]=n[d];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},6263:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:7,sidebar_label:"Install mod from WHMCS"},s="Install mod from WHMCS",i={unversionedId:"customizations/scripts/general-scripts/install-mod-from-whmcs",id:"customizations/scripts/general-scripts/install-mod-from-whmcs",title:"Install mod from WHMCS",description:"Game Mods",source:"@site/docs/customizations/scripts/general-scripts/install-mod-from-whmcs.mdx",sourceDirName:"customizations/scripts/general-scripts",slug:"/customizations/scripts/general-scripts/install-mod-from-whmcs",permalink:"/customizations/scripts/general-scripts/install-mod-from-whmcs",draft:!1,editUrl:"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/scripts/general-scripts/install-mod-from-whmcs.mdx",tags:[],version:"current",lastUpdatedAt:1693210718,formattedLastUpdatedAt:"Aug 28, 2023",sidebarPosition:7,frontMatter:{sidebar_position:7,sidebar_label:"Install mod from WHMCS"},sidebar:"tutorialSidebar",previous:{title:"Custom Login Form",permalink:"/customizations/scripts/general-scripts/custom-login-form"},next:{title:"Kill all processes running from the game server's root folder",permalink:"/customizations/scripts/general-scripts/kill-all-processes-running-from-the-game-servers-root-folder"}},l={},d=[{value:"Game Mods",id:"game-mods",level:2},{value:"Minecraft Mod Packs",id:"minecraft-mod-packs",level:2}],m={toc:d},c="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"install-mod-from-whmcs"},"Install mod from WHMCS"),(0,o.kt)("h2",{id:"game-mods"},"Game Mods"),(0,o.kt)("p",null,'The following Iron python script will install a mod after the game server has been created. Create a variable named "ModToInstall". Configure WHMCS to send the mod id to be installed after creating the game server. Configure it for the game\'s after created event. The script and variable can be configured as global.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'import clr;\nimport System;\n \nif (not ThisService.Variables.HasValue("ModToInstall")) or ThisService.Variables["ModToInstall"] == "":\n  Script.Exit()\n \nclr.AddReference("TCAdmin.SDK");\nclr.AddReference("TCAdmin.GameHosting.SDK");\nclr.AddReference("TCAdmin.GameHosting.ModuleApi");\nclr.AddReference("TCAdmin.TaskScheduler.SDK");\n \nfrom System import String;\nfrom TCAdmin.SDK.Misc import ObjectXml;\nfrom TCAdmin.GameHosting.SDK.Automation import GameHostingModInstallInfo;\nfrom TCAdmin.GameHosting.ModuleApi import ModuleDef;\nfrom TCAdmin.TaskScheduler.SDK.Objects import TaskStep;\n \nmodinfo = GameHostingModInstallInfo();\nGameHostingModInstallInfo.ServiceId.SetValue(modinfo, ThisService.ServiceId);\nGameHostingModInstallInfo.ModId.SetValue(modinfo, int(ThisService.Variables["ModToInstall"]));\nGameHostingModInstallInfo.Variables.SetValue(modinfo, String.Empty);\n \nmodstep = TaskStep();\nmodstep.TaskId = ThisTaskStep.Arguments.TaskId;\nmodstep.ModuleId = ModuleDef.ModuleId;\nmodstep.ProcessId = 8;\nmodstep.ServerId = ThisService.ServerId;\nmodstep.Name = "Install mod";\nmodstep.Arguments = ObjectXml.ObjectToXml(modinfo);\nmodstep.GenerateKey();\nmodstep.Save();\n')),(0,o.kt)("h2",{id:"minecraft-mod-packs"},"Minecraft Mod Packs"),(0,o.kt)("p",null,'The following Iron python script will install a mod pack after the game server has been created. You can use this script for minecraft mod packs. Create a variable named "ModToInstall". Configure WHMCS to send the mod to be installed after creating the game server. Configure it for the game\'s after created event. In this example if the value of ModToInstall is "RLCraft 1.12.2" it will install that version of RLCraft. You will need to add other modpack ids as needed.'),(0,o.kt)("p",null,"You can find PackId, VersionId and ModType of any mod pack with your web browser's developer console. Press F12. Select the network tab. Install a mod and view the install request to get the values of modid, version and type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'import clr\nimport System\nfrom System import Exception\n \nclr.AddReference("TCAdmin.SDK")\nclr.AddReference("TCAdmin.GameHosting.SDK")\nclr.AddReference("TCAdmin.GameHosting.ModuleApi")\nclr.AddReference("TCAdmin.TaskScheduler.SDK")\n \nfrom System import String\nfrom TCAdmin.SDK.Database import XmlField\nfrom TCAdmin.GameHosting.ModuleApi import ModuleDef\nfrom TCAdmin.TaskScheduler.SDK.Objects import TaskStep\n \nif (not ThisService.Variables.HasValue("ModToInstall")) or ThisService.Variables["ModToInstall"] == "":\n  Script.Exit()\n \nPackId = 0\nVersionId = 0\nModType = ""\n   \nif ThisService.Variables["ModToInstall"] == "RLCraft 1.12.2" :\n  PackId = 285109\n  VersionId = 3655670\n  ModType = "curseforge"\n \nif PackId == 0 :\n  raise Exception("Value \'{0}\' for ModToInstall is not valid".format(ThisService.Variables["ModToInstall"]))\n \nmodpackinfo = """<?xml version="1.0" encoding="utf-16"?>\n<ModpackInfo xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n  <ServiceId>{0}</ServiceId>\n  <ModpackId>{1}</ModpackId>\n  <VersionId>{2}</VersionId>\n  <Type>{3}</Type>\n  <JarVariable>{4}</JarVariable>\n</ModpackInfo>""".format(ThisService.ServiceId, PackId, VersionId, ModType, "customjar")\n \nmodstep = TaskStep()\nmodstep.TaskId = ThisTaskStep.Arguments.TaskId\nmodstep.ModuleId = "b48cfbc9-7acc-4980-89c4-2b6a1f784aa0"\nmodstep.ProcessId = 1\nmodstep.ServerId = ThisService.ServerId\nmodstep.Name = "Install modpack"\nmodstep.Arguments = modpackinfo\nmodstep.GenerateKey()\nmodstep.Save()\n')))}p.isMDXComponent=!0}}]);