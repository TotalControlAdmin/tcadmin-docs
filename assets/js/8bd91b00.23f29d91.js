"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[4153],{1574:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=r(4848),s=r(8453);const i={sidebar_position:10,sidebar_label:"Open and close ports in Windows firewall"},n="Open and close ports in Windows firewall",a={id:"customizations/scripts/general-scripts/open-close-ports-in-windows-firewall",title:"Open and close ports in Windows firewall",description:"If you enable support for Windows firewall in TCAdmin it will add the game server's executable to the firewall exceptions. If the game server is started with a .bat this will not work. You can set a custom batch script for the after created event that opens the game server's ports or adds the correct executable and a script for the after deleted event that closes the ports.",source:"@site/docs/customizations/scripts/general-scripts/open-close-ports-in-windows-firewall.mdx",sourceDirName:"customizations/scripts/general-scripts",slug:"/customizations/scripts/general-scripts/open-close-ports-in-windows-firewall",permalink:"/customizations/scripts/general-scripts/open-close-ports-in-windows-firewall",draft:!1,unlisted:!1,editUrl:"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/scripts/general-scripts/open-close-ports-in-windows-firewall.mdx",tags:[],version:"current",lastUpdatedAt:172530686e4,sidebarPosition:10,frontMatter:{sidebar_position:10,sidebar_label:"Open and close ports in Windows firewall"},sidebar:"tutorialSidebar",previous:{title:"Limit Service's Disk Space",permalink:"/customizations/scripts/general-scripts/limits-services-disk-space"},next:{title:"Restart service if used more than x cpu or memory for the last 3 queries",permalink:"/customizations/scripts/general-scripts/restart-service-if-used-more-than-x-cpu-mem"}},l={},c=[{value:"To open the game server&#39;s game, query and rcon ports",id:"to-open-the-game-servers-game-query-and-rcon-ports",level:2},{value:"To add the game server&#39;s executable to the firewall exceptions",id:"to-add-the-game-servers-executable-to-the-firewall-exceptions",level:2},{value:"To close the game server&#39;s ports or remove the executable",id:"to-close-the-game-servers-ports-or-remove-the-executable",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"open-and-close-ports-in-windows-firewall",children:"Open and close ports in Windows firewall"})}),"\n",(0,o.jsx)(t.p,{children:"If you enable support for Windows firewall in TCAdmin it will add the game server's executable to the firewall exceptions. If the game server is started with a .bat this will not work. You can set a custom batch script for the after created event that opens the game server's ports or adds the correct executable and a script for the after deleted event that closes the ports."}),"\n",(0,o.jsx)(t.h2,{id:"to-open-the-game-servers-game-query-and-rcon-ports",children:"To open the game server's game, query and rcon ports"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'netsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=TCP localport=%ThisService_GamePort%\nnetsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=TCP localport=%ThisService_QueryPort%\nnetsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=TCP localport=%ThisService_RConPort%\nnetsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=UDP localport=%ThisService_GamePort%\nnetsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=UDP localport=%ThisService_QueryPort%\nnetsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow protocol=UDP localport=%ThisService_RConPort%\n'})}),"\n",(0,o.jsx)(t.h2,{id:"to-add-the-game-servers-executable-to-the-firewall-exceptions",children:"To add the game server's executable to the firewall exceptions"}),"\n",(0,o.jsx)(t.p,{children:"Replace MyGame.exe with the correct relative path and filename."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'netsh advfirewall firewall add rule name="%ThisService_ConnectionInfo%" dir=in action=allow program="%ThisService_RootDirectory%MyGame.exe" enable=yes\n'})}),"\n",(0,o.jsx)(t.h2,{id:"to-close-the-game-servers-ports-or-remove-the-executable",children:"To close the game server's ports or remove the executable"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'netsh advfirewall firewall delete rule name="%ThisService_ConnectionInfo%"\n'})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>n,x:()=>a});var o=r(6540);const s={},i=o.createContext(s);function n(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);