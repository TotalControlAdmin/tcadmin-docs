"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[2541],{2210:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"customizations/web-server-configurations/setting-up-iis","title":"Setting up IIS with TCAdmin","description":"Prerequisites","source":"@site/docs/customizations/web-server-configurations/setting-up-iis.mdx","sourceDirName":"customizations/web-server-configurations","slug":"/customizations/web-server-configurations/setting-up-iis","permalink":"/customizations/web-server-configurations/setting-up-iis","draft":false,"unlisted":false,"editUrl":"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/web-server-configurations/setting-up-iis.mdx","tags":[],"version":"current","lastUpdatedAt":1743525296000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Setting up IIS with TCAdmin"},"sidebar":"tutorialSidebar","previous":{"title":"Web Server Configurations","permalink":"/category/web-server-configurations"},"next":{"title":"Setting up Nginx with TCAdmin","permalink":"/customizations/web-server-configurations/setting-up-nginx"}}');var t=i(4848),r=i(8453);const l={sidebar_position:1,sidebar_label:"Setting up IIS with TCAdmin"},o="Setting up IIS with TCAdmin",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Install IIS with ASP.NET 4.0/4.5 Support",id:"step-1-install-iis-with-aspnet-4045-support",level:2},{value:"Step 2: Set up SQLite Database (Skip if using MySQL)",id:"step-2-set-up-sqlite-database-skip-if-using-mysql",level:2},{value:"Step 3: Configure IIS for TCAdmin",id:"step-3-configure-iis-for-tcadmin",level:2},{value:"1. Add User to IIS Group",id:"1-add-user-to-iis-group",level:3},{value:"2. Create a Website in IIS Manager",id:"2-create-a-website-in-iis-manager",level:3},{value:"3. Configure Website Settings",id:"3-configure-website-settings",level:3},{value:"4. Configure <code>Aspx</code> Application",id:"4-configure-aspx-application",level:3},{value:"5. Let&#39;s Encrypt (Optional)",id:"5-lets-encrypt-optional",level:3},{value:"6. Set Folder Permissions",id:"6-set-folder-permissions",level:3},{value:"Step 4: Database Configuration",id:"step-4-database-configuration",level:2},{value:"Step 5: Disable Output Caching",id:"step-5-disable-output-caching",level:2},{value:"Step 6: Configure IIS for Multiple Worker Processes",id:"step-6-configure-iis-for-multiple-worker-processes",level:2},{value:"Step 7: SSL Certificate Installation",id:"step-7-ssl-certificate-installation",level:2},{value:"Option 1: Install Let&#39;s Encrypt SSL (Recommended)",id:"option-1-install-lets-encrypt-ssl-recommended",level:3},{value:"Option 2: Use a Custom SSL Certificate",id:"option-2-use-a-custom-ssl-certificate",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"setting-up-iis-with-tcadmin",children:"Setting up IIS with TCAdmin"})}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.admonition,{title:"Prerequisite",type:"info",children:(0,t.jsx)(n.p,{children:"Make sure you are running a supported Windows Server environment and have already downloaded and installed TCAdmin 2 before starting this guide."})}),"\n",(0,t.jsxs)(n.admonition,{title:"Warning for IIS Users",type:"caution",children:[(0,t.jsxs)(n.p,{children:["If you are using IIS with TCAdmin, ",(0,t.jsx)(n.strong,{children:"do not configure your monitor ports as 80 or 443"}),". Instead, use the default ports ",(0,t.jsx)(n.strong,{children:"8880 and 8881"}),"."]}),(0,t.jsx)(n.p,{children:"When the monitor starts, it reconfigures the ports using the HTTP listener. If ports 80 or 443 are assigned to the monitor, this can cause conflicts with IIS, resulting in service disruptions or unexpected behavior."}),(0,t.jsxs)(n.p,{children:["To avoid issues, ensure that your monitor ports are correctly set to ",(0,t.jsx)(n.strong,{children:"8880 and 8881"})," in the TCAdmin configuration."]})]}),"\n",(0,t.jsx)(n.p,{children:"Before setting up IIS with TCAdmin, ensure that:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You are running a Windows Server environment."}),"\n",(0,t.jsx)(n.li,{children:"You have downloaded and installed TCAdmin 2."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-install-iis-with-aspnet-4045-support",children:"Step 1: Install IIS with ASP.NET 4.0/4.5 Support"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Open ",(0,t.jsx)(n.strong,{children:"Server Manager"})," and select ",(0,t.jsx)(n.strong,{children:"Add Roles and Features"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Web Server (IIS)"})," under ",(0,t.jsx)(n.strong,{children:"Server Roles"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Under ",(0,t.jsx)(n.strong,{children:"Application Development"}),", ensure the following features are enabled:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"ASP.NET 4.x"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:".NET Extensibility 4.x"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Complete the installation process."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-2-set-up-sqlite-database-skip-if-using-mysql",children:"Step 2: Set up SQLite Database (Skip if using MySQL)"}),"\n",(0,t.jsx)(n.admonition,{title:"Using SQLite",type:"tip",children:(0,t.jsxs)(n.p,{children:["If you are using an SQLite database, ensure you copy ",(0,t.jsx)(n.code,{children:"sqlite3.dll"})," to the correct location (",(0,t.jsx)(n.code,{children:"C:\\Windows\\System32"}),")."]})}),"\n",(0,t.jsx)(n.p,{children:"If you're using SQLite for TCAdmin:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Copy the ",(0,t.jsx)(n.code,{children:"sqlite3.dll"})," file from ",(0,t.jsx)(n.code,{children:"TCAdmin2\\Monitor\\sqlite3.dll"})," to ",(0,t.jsx)(n.code,{children:"C:\\Windows\\System32"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-3-configure-iis-for-tcadmin",children:"Step 3: Configure IIS for TCAdmin"}),"\n",(0,t.jsx)(n.h3,{id:"1-add-user-to-iis-group",children:"1. Add User to IIS Group"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"TCAWeb"})," user to the ",(0,t.jsx)(n.code,{children:"IIS_IUSRS"})," group. This ensures proper permissions for web access."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-create-a-website-in-iis-manager",children:"2. Create a Website in IIS Manager"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Open ",(0,t.jsx)(n.strong,{children:"IIS Manager"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Right-click ",(0,t.jsx)(n.strong,{children:"Sites"})," > ",(0,t.jsx)(n.strong,{children:"Add Website"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.strong,{children:"Physical Path"})," to ",(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel.MVC"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.strong,{children:"Application Pool"})," to ",(0,t.jsx)(n.code,{children:".NET v4.5"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Right-click on the newly created website and select ",(0,t.jsx)(n.strong,{children:"Add Application"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Name the application ",(0,t.jsx)(n.strong,{children:"Aspx"})," (case-sensitive)."]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.strong,{children:"Physical Path"})," to ",(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use the same ",(0,t.jsx)(n.strong,{children:".NET v4.5"})," application pool."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-configure-website-settings",children:"3. Configure Website Settings"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In IIS Manager, select the website, click ",(0,t.jsx)(n.strong,{children:"Basic Settings"}),", and click ",(0,t.jsx)(n.strong,{children:"Connect As"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Enter the credentials for the Windows user running the TCAdmin website."}),"\n",(0,t.jsxs)(n.li,{children:["Ensure this user has ",(0,t.jsx)(n.strong,{children:"full permissions"})," on the following folders:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ControlPanel"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ControlPanel.MVC"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Cache"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Temp"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Logs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Database"})}),"\n",(0,t.jsxs)(n.li,{children:["Read permissions for ",(0,t.jsx)(n.code,{children:"Monitor\\Shared"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"4-configure-aspx-application",children:["4. Configure ",(0,t.jsx)(n.code,{children:"Aspx"})," Application"]}),"\n",(0,t.jsxs)(n.p,{children:["Ensure the ",(0,t.jsx)(n.strong,{children:"Aspx"})," application uses the same user as the main website (from step 3)."]}),"\n",(0,t.jsx)(n.h3,{id:"5-lets-encrypt-optional",children:"5. Let's Encrypt (Optional)"}),"\n",(0,t.jsx)(n.admonition,{title:"Let's Encrypt Option",type:"note",children:(0,t.jsx)(n.p,{children:"Using Let's Encrypt for SSL certificates is recommended if you don\u2019t already have a custom SSL certificate."})}),"\n",(0,t.jsx)(n.p,{children:"If using Let's Encrypt, bind the website to a specific IP and hostname to prevent TCAdmin from changing the certificate."}),"\n",(0,t.jsx)(n.h3,{id:"6-set-folder-permissions",children:"6. Set Folder Permissions"}),"\n",(0,t.jsx)(n.admonition,{title:"Permissions",type:"caution",children:(0,t.jsxs)(n.p,{children:["Ensure that you assign the correct permissions to ",(0,t.jsx)(n.code,{children:"IIS APPPOOL\\.NET v4.5"}),". Missing or incorrect permissions can cause issues with the TCAdmin control panel."]})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Grant full control to ",(0,t.jsx)(n.code,{children:"IIS APPPOOL\\.NET v4.5"})," on the following directories:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\Cache"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\Temp"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\Logs\\Web"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel.MVC"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"C:\\Program Files\\TCAdmin2\\Database"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Under ",(0,t.jsx)(n.strong,{children:'"Connect as..."'}),", enter the user and password of the Windows user that runs your website."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"TCAWeb Setup",type:"important",children:(0,t.jsxs)(n.p,{children:["If using ",(0,t.jsx)(n.strong,{children:"TCAWeb"}),", start the monitor in ",(0,t.jsx)(n.strong,{children:"console mode"})," and execute ",(0,t.jsx)(n.code,{children:"tcaweb-pass"})," to obtain the password or attach ",(0,t.jsx)(n.code,{children:"TCAdmin2\\Monitor\\TCAWeb.config"})," to a support ticket for assistance."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tcaweb-pass\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Configure the Aspx application to run with the same user as the main website."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-4-database-configuration",children:"Step 4: Database Configuration"}),"\n",(0,t.jsx)(n.admonition,{title:"Warning",type:"caution",children:(0,t.jsx)(n.p,{children:"Disabling the built-in TCAdmin web server is permanent unless you run the re-enable command provided."})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To disable the built-in TCAdmin web server, run the following SQL command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"DELETE FROM tc_server_enabled_components \nWHERE module_id = '07405876-e8c2-4b24-a774-4ef57f596384' \nAND component_id = 2 \nAND server_id = 1;\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you ever wish to enable the built in web server again you can run the following SQL command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSERT INTO tc_server_enabled_components \n(module_id, component_id, server_id) \nVALUES ('07405876-e8c2-4b24-a774-4ef57f596384', 2, 1);\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-5-disable-output-caching",children:"Step 5: Disable Output Caching"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"In IIS Manager, select your website."}),"\n",(0,t.jsx)(n.li,{children:"Double-click Output Caching."}),"\n",(0,t.jsx)(n.li,{children:"Under Actions, click Edit Feature Settings."}),"\n",(0,t.jsx)(n.li,{children:"Uncheck both Enable Cache and Enable kernel cache."}),"\n",(0,t.jsx)(n.li,{children:"Click OK."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-6-configure-iis-for-multiple-worker-processes",children:"Step 6: Configure IIS for Multiple Worker Processes"}),"\n",(0,t.jsx)(n.admonition,{title:"Multiple Worker Processes",type:"tip",children:(0,t.jsx)(n.p,{children:"Running multiple worker processes improves performance for high-traffic websites but requires proper session state configuration."})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Follow the instructions in Step 4 to disable the built-in web server."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start the ASP.NET State Service and set it to Automatic:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Go to Start > Administrative Tools > Services."}),"\n",(0,t.jsxs)(n.li,{children:["Right click on ASP.net state service > properties > Recovery","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["First failure: ",(0,t.jsx)(n.code,{children:"Restart"})]}),"\n",(0,t.jsxs)(n.li,{children:["Second failure: ",(0,t.jsx)(n.code,{children:"Restart"})]}),"\n",(0,t.jsxs)(n.li,{children:["Subsequent failures: ",(0,t.jsx)(n.code,{children:"Restart"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Edit the following web.config files:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"TCAdmin2\\ControlPanel\\Web.config"}),"\n",(0,t.jsx)(n.li,{children:"TCAdmin2\\ControlPanel.MVC\\Web.config"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"3.1. Replace the session state configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<sessionState timeout="30" />\n'})}),"\n",(0,t.jsx)(n.p,{children:"With:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<sessionState mode="StateServer" stateConnectionString="tcpip=localhost:42424" cookieless="false" timeout="30" />\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-7-ssl-certificate-installation",children:"Step 7: SSL Certificate Installation"}),"\n",(0,t.jsx)(n.h3,{id:"option-1-install-lets-encrypt-ssl-recommended",children:"Option 1: Install Let's Encrypt SSL (Recommended)"}),"\n",(0,t.jsx)(n.admonition,{title:"Let's Encrypt Tip",type:"info",children:(0,t.jsx)(n.p,{children:"For automatic SSL management, Let's Encrypt is the recommended option. Certify The Web provides a simple interface to manage certificates."})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download Certify The Web: Download it from ",(0,t.jsx)(n.a,{href:"https://certifytheweb.com/",children:"Certify The Web"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install and Configure:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Follow the on-screen instructions for installation."}),"\n",(0,t.jsxs)(n.li,{children:["For detailed documentation, visit ",(0,t.jsx)(n.a,{href:"https://docs.certifytheweb.com/",children:"Certify The Web Documentation"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"option-2-use-a-custom-ssl-certificate",children:"Option 2: Use a Custom SSL Certificate"}),"\n",(0,t.jsx)(n.admonition,{title:"SSL Certificate Installation",type:"caution",children:(0,t.jsx)(n.p,{children:"Ensure that the SSL certificate is correctly installed in Windows following the linked guide, as an incorrectly configured certificate can cause connection issues."})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Install your custom SSL certificate following this ",(0,t.jsx)(n.a,{href:"https://www.trustico.com/install/import/iis7/iis7-pfx-installation.php",children:"guide"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open the TCAdmin 2 Configuration Utility and navigate to IP and Port Settings."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Select your custom SSL certificate from the list and apply the changes."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Best Practices",type:"tip",children:(0,t.jsx)(n.p,{children:"It\u2019s a good idea to back up your configuration and website settings before making any major changes to the IIS or TCAdmin setup."})}),"\n",(0,t.jsx)(n.p,{children:"Adjust URLs, file paths, and commands based on your specific setup and configuration. For additional support, consult the official TCAdmin or IIS documentation."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);