"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[2832],{1648:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var s=i(7624),t=i(2172);const l={sidebar_position:1,sidebar_label:"Setting up IIS with TCAdmin"},r="Setting up IIS with TCAdmin",o={id:"customizations/web-server-configurations/setting-up-iis",title:"Setting up IIS with TCAdmin",description:"Install IIS with Support for ASP.NET 4.0/4.5 Development",source:"@site/docs/customizations/web-server-configurations/setting-up-iis.mdx",sourceDirName:"customizations/web-server-configurations",slug:"/customizations/web-server-configurations/setting-up-iis",permalink:"/customizations/web-server-configurations/setting-up-iis",draft:!1,unlisted:!1,editUrl:"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/web-server-configurations/setting-up-iis.mdx",tags:[],version:"current",lastUpdatedAt:1707427501,formattedLastUpdatedAt:"Feb 8, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Setting up IIS with TCAdmin"},sidebar:"tutorialSidebar",previous:{title:"Web Server Configurations",permalink:"/category/web-server-configurations"},next:{title:"Setting up Nginx with TCAdmin",permalink:"/customizations/web-server-configurations/setting-up-nginx"}},c={},d=[{value:"Install IIS with Support for ASP.NET 4.0/4.5 Development",id:"install-iis-with-support-for-aspnet-4045-development",level:2},{value:"Set up SQLite Database",id:"set-up-sqlite-database",level:2},{value:"Configure IIS",id:"configure-iis",level:2},{value:"Database Configuration",id:"database-configuration",level:2},{value:"Disable Output Caching",id:"disable-output-caching",level:2},{value:"Configure IIS with Multiple Worker Processes",id:"configure-iis-with-multiple-worker-processes",level:2},{value:"Lets Encrpyt Install (recommended)",id:"lets-encrpyt-install-recommended",level:2},{value:"Installation",id:"installation",level:2},{value:"Use Custom SSL Certificate (Windows) (optional)",id:"use-custom-ssl-certificate-windows-optional",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"setting-up-iis-with-tcadmin",children:"Setting up IIS with TCAdmin"}),"\n",(0,s.jsx)(n.h2,{id:"install-iis-with-support-for-aspnet-4045-development",children:"Install IIS with Support for ASP.NET 4.0/4.5 Development"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Install IIS on your system with support for ASP.NET 4.0/4.5 development."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"set-up-sqlite-database",children:"Set up SQLite Database"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Copy ",(0,s.jsx)(n.code,{children:"TCAdmin2\\Monitor\\sqlite3.dll"})," to ",(0,s.jsx)(n.code,{children:"C:\\Windows\\System32"})," if you are using an SQLite database."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configure-iis",children:"Configure IIS"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the user ",(0,s.jsx)(n.code,{children:"TCAWeb"})," to the ",(0,s.jsx)(n.code,{children:"IIS_IUSRS"})," group."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Manually create a website in IIS Manager:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Web root: ",(0,s.jsx)(n.code,{children:"Program Files\\TCAdmin2\\ControlPanel.MVC"})]}),"\n",(0,s.jsxs)(n.li,{children:["Application pool: ",(0,s.jsx)(n.code,{children:".NET v4.5"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'In IIS Manager, right-click on the created website and select "Add Application":'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Name: ",(0,s.jsx)(n.code,{children:"Aspx"})," (case-sensitive)"]}),"\n",(0,s.jsxs)(n.li,{children:["Web root: ",(0,s.jsx)(n.code,{children:"Program Files\\TCAdmin2\\ControlPanel"})]}),"\n",(0,s.jsxs)(n.li,{children:["Application pool: ",(0,s.jsx)(n.code,{children:".NET v4.5"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Select the website in IIS Manager:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Click on "Basic Settings"'}),"\n",(0,s.jsx)(n.li,{children:'Under "Connect as...", enter the user and password of the Windows user that runs your website.'}),"\n",(0,s.jsxs)(n.li,{children:["Ensure this user has full permissions on the following folders:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ControlPanel"}),"\n",(0,s.jsx)(n.li,{children:"ControlPanel.MVC"}),"\n",(0,s.jsx)(n.li,{children:"Cache"}),"\n",(0,s.jsx)(n.li,{children:"Temp"}),"\n",(0,s.jsx)(n.li,{children:"Logs"}),"\n",(0,s.jsx)(n.li,{children:"Database"}),"\n",(0,s.jsx)(n.li,{children:"Read permissions on Monitor\\Shared"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If using TCAWeb, start the monitor in console mode and execute ",(0,s.jsx)(n.code,{children:"tcaweb-pass"})," to obtain the password or attach ",(0,s.jsx)(n.code,{children:"TCAdmin2\\Monitor\\TCAWeb.config"})," to a support ticket for assistance."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Configure the ",(0,s.jsx)(n.code,{children:"Aspx"})," application to run with the same user as the main website."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If using Let's Encrypt, bind the website to a specific IP and hostname to prevent TCAdmin from changing the website's certificate."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Give full permissions to ",(0,s.jsx)(n.code,{children:"IIS APPPOOL\\.NET v4.5"})," on the following folders:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\Cache"}),"\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\Temp"}),"\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\Logs\\Web"}),"\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel"}),"\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\ControlPanel.MVC"}),"\n",(0,s.jsx)(n.li,{children:"C:\\Program Files\\TCAdmin2\\Database"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Execute the following command on your database to disable the built-in web server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"DELETE FROM tc_server_enabled_components WHERE module_id = '07405876-e8c2-4b24-a774-4ef57f596384' AND component_id = 2 AND server_id = 1;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If you need to enable the built-in web server again, use the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INSERT INTO tc_server_enabled_components (module_id, component_id, server_id) values ('07405876-e8c2-4b24-a774-4ef57f596384', 2, 1);\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"disable-output-caching",children:"Disable Output Caching"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Disable output caching to prevent issues with user sessions:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Open IIS Manager"}),"\n",(0,s.jsx)(n.li,{children:"Select your website"}),"\n",(0,s.jsx)(n.li,{children:'Double click on "Output Caching"'}),"\n",(0,s.jsx)(n.li,{children:'Under Actions on the right side, click on "Edit Feature Settings"'}),"\n",(0,s.jsx)(n.li,{children:'Uncheck "Enable Cache" and "Enable kernel cache"'}),"\n",(0,s.jsx)(n.li,{children:"Click OK"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configure-iis-with-multiple-worker-processes",children:"Configure IIS with Multiple Worker Processes"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Follow the instructions above to disable the built-in web server."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Start the ASP.NET state service and set the startup to Automatic:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Go to Start > Administrative Tools > Services"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"TCAdmin2\\ControlPanel\\Web.config"})," and ",(0,s.jsx)(n.code,{children:"TCAdmin2\\ControlPanel.MVC\\Web.config"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Replace ",(0,s.jsx)(n.code,{children:'<sessionState timeout="30"/>'})," with ",(0,s.jsx)(n.code,{children:'<sessionState mode="StateServer" stateConnectionString="tcpip=localhost:42424" cookieless="false" timeout="30" />'})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Open IIS Manager and select the advanced properties of the .NET Application pool. Increase the number of worker processes as needed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"lets-encrpyt-install-recommended",children:"Lets Encrpyt Install (recommended)"}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Download Certify The Web:"}),"\nVisit the official website of Certify The Web at ",(0,s.jsx)(n.a,{href:"https://certifytheweb.com/",children:"https://certifytheweb.com/"})," and download the appropriate version for your operating system (Windows)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Install Certify The Web:"}),"\nRun the installer and follow the on-screen instructions to install Certify The Web on your system."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Here is the full documentation to Certify The Web ",(0,s.jsx)(n.a,{href:"https://docs.certifytheweb.com/",children:"https://docs.certifytheweb.com/"})]})}),"\n",(0,s.jsx)(n.h2,{id:"use-custom-ssl-certificate-windows-optional",children:"Use Custom SSL Certificate (Windows) (optional)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install the SSL certificate in Windows. Follow the instructions at ",(0,s.jsx)(n.a,{href:"https://www.trustico.com/install/import/iis7/iis7-pfx-installation.php",children:"Trustico"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Launch the TCAdmin 2 Configuration Utility:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Go to Start > Programs > TCAdmin 2 > Configuration Utility"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Navigate through the utility until you reach the IP and port settings."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Check the option to use a custom certificate and select it from the list."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Continue through the utility until the monitor is restarted."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"The actual URLs, paths, and commands may need adjustments based on your specific setup and requirements."})})]})}function h(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},2172:(e,n,i)=>{i.d(n,{I:()=>o,M:()=>r});var s=i(1504);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);