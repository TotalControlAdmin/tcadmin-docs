"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[7214],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),m=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=m(e.components);return i.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=m(n),c=a,h=u["".concat(s,".").concat(c)]||u[c]||p[c]||l;return n?i.createElement(h,o(o({ref:t},d),{},{components:n})):i.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[u]="string"==typeof e?e:a,o[1]=r;for(var m=2;m<l;m++)o[m]=n[m];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5571:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>m});var i=n(7462),a=(n(7294),n(3905));const l={sidebar_position:1,sidebar_label:"MVC Templates"},o="MVC Templates",r={unversionedId:"customizations/themes/mvc-templates",id:"customizations/themes/mvc-templates",title:"MVC Templates",description:"MVC Templates allow you to edit the HTML for all or each individual page. If you only want to edit colors of the theme see MVC Themes.",source:"@site/docs/customizations/themes/mvc-templates.mdx",sourceDirName:"customizations/themes",slug:"/customizations/themes/mvc-templates",permalink:"/customizations/themes/mvc-templates",draft:!1,editUrl:"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/themes/mvc-templates.mdx",tags:[],version:"current",lastUpdatedAt:1693212227,formattedLastUpdatedAt:"Aug 28, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"MVC Templates"},sidebar:"tutorialSidebar",previous:{title:"Themes",permalink:"/category/themes"},next:{title:"MVC Themes with ThemeBuilder",permalink:"/customizations/themes/mvc-themes"}},s={},m=[{value:"Features",id:"features",level:2},{value:"Editable HTML templates:",id:"editable-html-templates",level:3},{value:"The following features are configurable in the game settings",id:"the-following-features-are-configurable-in-the-game-settings",level:3},{value:"Requirements",id:"requirements",level:2},{value:"Configure TCAdmin",id:"configure-tcadmin",level:2},{value:"Update the WHMCS module (optional)",id:"update-the-whmcs-module-optional",level:2},{value:"Linux Nginx configuration (optional)",id:"linux-nginx-configuration-optional",level:2},{value:"Windows IIS configuration (optional)",id:"windows-iis-configuration-optional",level:2},{value:"Edit Templates in Visual Studio 2017/2019",id:"edit-templates-in-visual-studio-20172019",level:2},{value:"Run Visual Studio",id:"run-visual-studio",level:3},{value:"Edit Templates with a text editor",id:"edit-templates-with-a-text-editor",level:2},{value:"Adding code to existing .cshtml file without modifying it",id:"adding-code-to-existing-cshtml-file-without-modifying-it",level:2},{value:"Going back to the classic ASP.NET themes",id:"going-back-to-the-classic-aspnet-themes",level:2},{value:"Permanently:",id:"permanently",level:3},{value:"Temporary:",id:"temporary",level:3}],d={toc:m},u="wrapper";function p(e){let{components:t,...l}=e;return(0,a.kt)(u,(0,i.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mvc-templates"},"MVC Templates"),(0,a.kt)("p",null,"MVC Templates allow you to edit the HTML for all or each individual page. If you only want to edit colors of the theme see ",(0,a.kt)("a",{parentName:"p",href:"/customizations/themes/mvc-templates"},"MVC Themes"),"."),(0,a.kt)("h2",{id:"features"},"Features"),(0,a.kt)("h3",{id:"editable-html-templates"},"Editable HTML templates:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create a new theme in ",(0,a.kt)("inlineCode",{parentName:"li"},"Settings")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Themes"),". Set the type to MVC. A folder will be created in ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views")," where you can place your custom ",(0,a.kt)("inlineCode",{parentName:"li"},".cshtml")," and images."),(0,a.kt)("li",{parentName:"ul"},"Your custom template folder only needs to have the files that have been modified."),(0,a.kt)("li",{parentName:"ul"},"If a file doesn't exist in your custom template it will use the file from ",(0,a.kt)("inlineCode",{parentName:"li"},"~/Views/Default/.")," Use the same directory structure as the Default template."),(0,a.kt)("li",{parentName:"ul"},"You can safely add new files to the default template folder but all the original files will be overwritten when you update TCAdmin."),(0,a.kt)("li",{parentName:"ul"},"To translate MVC templates go to ",(0,a.kt)("inlineCode",{parentName:"li"},"Settings")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Languages")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"select the language")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Other Components")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Resources.*."))),(0,a.kt)("h3",{id:"the-following-features-are-configurable-in-the-game-settings"},"The following features are configurable in the game settings"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Custom service home page template per game. (change whole layout of the service home page)"),(0,a.kt)("li",{parentName:"ul"},"Custom status template per game. (change which information and ports are displayed)"),(0,a.kt)("li",{parentName:"ul"},"Join URL")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"800px-MVCPreview1",src:n(2742).Z,width:"800",height:"453"})),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"300px-MVCPreview2.png",src:n(9144).Z,width:"300",height:"534"})),(0,a.kt)("h2",{id:"requirements"},"Requirements"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},".NET 4.7.2"))," (Windows) or ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"Mono 6.x"))," (Linux) must be installed on your server."),(0,a.kt)("li",{parentName:"ul"},"Install TCAdmin version ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"2.0.127.0"))," or greater.")),(0,a.kt)("h2",{id:"configure-tcadmin"},"Configure TCAdmin"),(0,a.kt)("p",null,"New installations already have MVC enabled by default"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Edit ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\Monitor\\TCAdminMonitor.exe.config")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"/home/tcadmin/Monitor/TCAdminMonitor.exe.config"),". Add these lines under ",(0,a.kt)("inlineCode",{parentName:"li"},"<appSettings>")," (update them if they already exist).")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'<add key="TCAdmin.Public.MVC" value="True" />\n<add key="TCAdmin.Public.MVC.WebServicesPath" value="../ControlPanel.MVC" />\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Restart the monitor service.")),(0,a.kt)("admonition",{title:"Important for Linux users",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Https is not supported by the built in web server when ",(0,a.kt)("inlineCode",{parentName:"p"},"TCAdmin.Public.MVC")," is set to True. To use https you must ",(0,a.kt)("a",{parentName:"p",href:"/customizations/web-server-configurations/setting-up-nginx"},(0,a.kt)("strong",{parentName:"a"},"configure your control panel with Nginx")),".")),(0,a.kt)("h2",{id:"update-the-whmcs-module-optional"},"Update the WHMCS module (optional)"),(0,a.kt)("p",null,"Make a backup of your ",(0,a.kt)("inlineCode",{parentName:"p"},"/whmcs/modules/servers/tcadmin2_advanced/tcadmin2_advanced.php")," and replace it the one included in the tcadmin2_advanced module for MVC. This module has the links updated to work with the MVC template format. ",(0,a.kt)("a",{parentName:"p",href:"https://clients.tcadmin.com/downloads.php?action=displaycat&catid=5"},"You can download the module from the client area")),(0,a.kt)("h2",{id:"linux-nginx-configuration-optional"},"Linux Nginx configuration (optional)"),(0,a.kt)("p",null,"Configure Nginx with these instructions ",(0,a.kt)("a",{parentName:"p",href:"/customizations/web-server-configurations/setting-up-nginx"},"Configure TCAdmin to run with Nginx")),(0,a.kt)("h2",{id:"windows-iis-configuration-optional"},"Windows IIS configuration (optional)"),(0,a.kt)("p",null,"Configure the website in IIS with these instructions: ",(0,a.kt)("a",{parentName:"p",href:"/customizations/web-server-configurations/setting-up-iis"},"Configure TCAdmin to run with IIS")),(0,a.kt)("h2",{id:"edit-templates-in-visual-studio-20172019"},"Edit Templates in Visual Studio 2017/2019"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Go to ",(0,a.kt)("inlineCode",{parentName:"li"},"settings")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Themes")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Create a new MVC theme"),". This is the template that you will be editing in Visual Studio."),(0,a.kt)("li",{parentName:"ul"},"Copy ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\Monitor\\Shared")," to your PC."),(0,a.kt)("li",{parentName:"ul"},"Rename ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\Web.VS2017.config")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\Web.config")),(0,a.kt)("li",{parentName:"ul"},"Edit ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\Web.config")," in notepad.",(0,a.kt)("admonition",{parentName:"li",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"We recommend ",(0,a.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/"},"Visual Studio Code")," for all configuration edits that need to be made.")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Update the value of ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin.SharedPath")," to the correct path."),(0,a.kt)("li",{parentName:"ul"},"Update ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin.Database.MySql.ConnectionString")," with your MySQL info. If the connection string is encrypted use these lines and change ",(0,a.kt)("inlineCode",{parentName:"li"},"MYSQLIP"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"MYSQLUSER"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"MYSQLPASSWORD")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"MYSQLDB")," with the correct values. You can connect to your master's database or to a local copy.")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'<add key="TCAdmin.Database.MySql.ConnectionString" value="Data Source=MYSQLIP;User Id=MYSQLUSER;Password=MYSQLPASSWORD;Database=MYSQLDB;Pooling=false;Compress=false;Connection Lifetime=900;Connect Timeout=30;Protocol=TCP" />\n<add key="TCAdmin.Database.MySql.ConnectionString.Encrypted" value="False" />\n')),(0,a.kt)("h3",{id:"run-visual-studio"},"Run Visual Studio"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"select ",(0,a.kt)("inlineCode",{parentName:"li"},"File")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Open")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Web Site"),". Select your ControlPanel.MVC folder."),(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("inlineCode",{parentName:"li"},"Website")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Start Options")," from the menu."),(0,a.kt)("li",{parentName:"ul"},"In Build > Before running startup page select ",(0,a.kt)("inlineCode",{parentName:"li"},"No build")," and click on OK. Depending on your Visual Studio version this might be in ",(0,a.kt)("inlineCode",{parentName:"li"},"Build")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Configuration Manager")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Uncheck build next to the website"),"."),(0,a.kt)("li",{parentName:"ul"},"You should be able to run the solution and it will load the control panel website. ")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Only MVC content will render correctly. Classic ASP.NET content will show a server error.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Don't edit the files from the default template. To edit a specific page copy it from ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\Views\\Default")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\Views\\(YourTemplate)")," keeping the same directory structure. You don't need to copy all files. If a file is not in your template the default file will be used."),(0,a.kt)("li",{parentName:"ul"},"You should have full intellisense support when editing the template files. If you see an errors about missing references copy the file from Shared to ",(0,a.kt)("inlineCode",{parentName:"li"},"ControlPanel.MVC\\bin")," and restart Visual Studio.")),(0,a.kt)("h2",{id:"edit-templates-with-a-text-editor"},"Edit Templates with a text editor"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"We recommend ",(0,a.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/"},"Visual Studio Code")," for all configuration edits that need to be made.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create a new theme in ",(0,a.kt)("inlineCode",{parentName:"li"},"Settings")," > ",(0,a.kt)("inlineCode",{parentName:"li"},"Themes"),". Set the type to MVC. A folder will be created in ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views")," where you can place your custom ",(0,a.kt)("inlineCode",{parentName:"li"},".cshtml")," and images."),(0,a.kt)("li",{parentName:"ul"},"Copy the file you want to customize from ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views\\Default")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views\\(YourTemplate)"),". You must keep the same directory structure of the original file. For example to customize the login page copy ",(0,a.kt)("inlineCode",{parentName:"li"},"Views\\Default\\Base\\Login\\Index.cshtml")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"Views\\(YourTemplate)\\Base\\Login\\Index.cshtml")," and edit ",(0,a.kt)("inlineCode",{parentName:"li"},"Index.cshtml")," with a text editor.")),(0,a.kt)("h2",{id:"adding-code-to-existing-cshtml-file-without-modifying-it"},"Adding code to existing .cshtml file without modifying it"),(0,a.kt)("p",null,"Each .cshtml file in TCAdmin2\\ControlPanel.MVC\\Views\\Default supports adding server and client side code using plugin files. The plugin filename should be ",(0,a.kt)("inlineCode",{parentName:"p"},"OriginalFile.Plugin.AnyName.cshtml"),". "),(0,a.kt)("admonition",{title:"example",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"if you want to add code to the HTML HEAD for a live chat software:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"The default HEAD code is in ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views\\Default\\Shared\\_Head.cshtml")),(0,a.kt)("li",{parentName:"ul"},"To add your code as a plugin you need to create a file ",(0,a.kt)("inlineCode",{parentName:"li"},"TCAdmin2\\ControlPanel.MVC\\Views\\Default\\Shared\\_Head.Plugin.LiveChat.cshtml")))),(0,a.kt)("h2",{id:"going-back-to-the-classic-aspnet-themes"},"Going back to the classic ASP.NET themes"),(0,a.kt)("p",null,"If you want to go back to the classic ASP.NET themes:"),(0,a.kt)("h3",{id:"permanently"},"Permanently:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Edit C:\\Program Files\\TCAdmin2\\Monitor\\TCAdminMonitor.exe.config or /home/tcadmin/Monitor/TCAdminMonitor.exe.config and set the value of TCAdmin.Public.MVC to False"),(0,a.kt)("li",{parentName:"ul"},"Restart the monitor.")),(0,a.kt)("h3",{id:"temporary"},"Temporary:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Log out from the MVC panel. View ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"http://x.x.x.x:8880/Aspx/"))," (the / at the end is important) Then log in again.")))}p.isMDXComponent=!0},9144:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/300px-MVCPreview2-f32d71d71f74fa0cb1c62b0ac3401ffa.png"},2742:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/800px-MVCPreview1-5608a599263ebbdd5448562486a88802.png"}}]);