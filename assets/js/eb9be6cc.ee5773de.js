"use strict";(self.webpackChunktcadmin_docs=self.webpackChunktcadmin_docs||[]).push([[1720],{647:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/800px-MVCPreview1-5608a599263ebbdd5448562486a88802.png"},4431:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"customizations/themes/mvc-templates","title":"MVC Templates","description":"MVC Templates allow you to edit the HTML for all or each individual page. If you only want to edit colors of the theme see MVC Themes.","source":"@site/docs/customizations/themes/mvc-templates.mdx","sourceDirName":"customizations/themes","slug":"/customizations/themes/mvc-templates","permalink":"/customizations/themes/mvc-templates","draft":false,"unlisted":false,"editUrl":"https://github.com/TotalControlAdmin/tcadmin-docs/blob/master/docs/customizations/themes/mvc-templates.mdx","tags":[],"version":"current","lastUpdatedAt":1756486310000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"MVC Templates"},"sidebar":"tutorialSidebar","previous":{"title":"Themes","permalink":"/category/themes"},"next":{"title":"MVC Themes with ThemeBuilder","permalink":"/customizations/themes/mvc-themes"}}');var o=n(4848),s=n(8453);const l={sidebar_position:1,sidebar_label:"MVC Templates"},d="MVC Templates",r={},a=[{value:"Features",id:"features",level:2},{value:"Editable HTML templates:",id:"editable-html-templates",level:3},{value:"The following features are configurable in the game settings",id:"the-following-features-are-configurable-in-the-game-settings",level:3},{value:"Requirements",id:"requirements",level:2},{value:"Configure TCAdmin",id:"configure-tcadmin",level:2},{value:"Update the WHMCS module (optional)",id:"update-the-whmcs-module-optional",level:2},{value:"Linux Nginx configuration (optional)",id:"linux-nginx-configuration-optional",level:2},{value:"Windows IIS configuration (optional)",id:"windows-iis-configuration-optional",level:2},{value:"Edit Templates in Visual Studio 2017/2019",id:"edit-templates-in-visual-studio-20172019",level:2},{value:"Run Visual Studio",id:"run-visual-studio",level:3},{value:"Edit Templates with a text editor",id:"edit-templates-with-a-text-editor",level:2},{value:"Adding code to existing .cshtml file without modifying it",id:"adding-code-to-existing-cshtml-file-without-modifying-it",level:2},{value:"Going back to the classic ASP.NET themes",id:"going-back-to-the-classic-aspnet-themes",level:2},{value:"Permanently:",id:"permanently",level:3},{value:"Temporary:",id:"temporary",level:3}];function c(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"mvc-templates",children:"MVC Templates"})}),"\n",(0,o.jsxs)(i.p,{children:["MVC Templates allow you to edit the HTML for all or each individual page. If you only want to edit colors of the theme see ",(0,o.jsx)(i.a,{href:"/customizations/themes/mvc-templates",children:"MVC Themes"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"features",children:"Features"}),"\n",(0,o.jsx)(i.h3,{id:"editable-html-templates",children:"Editable HTML templates:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Create a new theme in ",(0,o.jsx)(i.code,{children:"Settings"})," > ",(0,o.jsx)(i.code,{children:"Themes"}),". Set the type to MVC. A folder will be created in ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views"})," where you can place your custom ",(0,o.jsx)(i.code,{children:".cshtml"})," and images."]}),"\n",(0,o.jsx)(i.li,{children:"Your custom template folder only needs to have the files that have been modified."}),"\n",(0,o.jsxs)(i.li,{children:["If a file doesn't exist in your custom template it will use the file from ",(0,o.jsx)(i.code,{children:"~/Views/Default/."})," Use the same directory structure as the Default template."]}),"\n",(0,o.jsx)(i.li,{children:"You can safely add new files to the default template folder but all the original files will be overwritten when you update TCAdmin."}),"\n",(0,o.jsxs)(i.li,{children:["To translate MVC templates go to ",(0,o.jsx)(i.code,{children:"Settings"})," > ",(0,o.jsx)(i.code,{children:"Languages"})," > ",(0,o.jsx)(i.code,{children:"select the language"})," > ",(0,o.jsx)(i.code,{children:"Other Components"})," > ",(0,o.jsx)(i.code,{children:"Resources.*."})]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"the-following-features-are-configurable-in-the-game-settings",children:"The following features are configurable in the game settings"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Custom service home page template per game. (change whole layout of the service home page)"}),"\n",(0,o.jsx)(i.li,{children:"Custom status template per game. (change which information and ports are displayed)"}),"\n",(0,o.jsx)(i.li,{children:"Join URL"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{alt:"800px-MVCPreview1",src:n(647).A+"",width:"800",height:"453"})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{alt:"300px-MVCPreview2.png",src:n(9255).A+"",width:"300",height:"534"})}),"\n",(0,o.jsx)(i.h2,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:(0,o.jsx)(i.code,{children:".NET 4.7.2"})})," (Windows) or ",(0,o.jsx)(i.strong,{children:(0,o.jsx)(i.code,{children:"Mono 6.x"})})," (Linux) must be installed on your server."]}),"\n",(0,o.jsxs)(i.li,{children:["Install TCAdmin version ",(0,o.jsx)(i.strong,{children:(0,o.jsx)(i.code,{children:"2.0.127.0"})})," or greater."]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"configure-tcadmin",children:"Configure TCAdmin"}),"\n",(0,o.jsx)(i.p,{children:"New installations already have MVC enabled by default"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Edit ",(0,o.jsx)(i.code,{children:"TCAdmin2\\Monitor\\TCAdminMonitor.exe.config"})," or ",(0,o.jsx)(i.code,{children:"/home/tcadmin/Monitor/TCAdminMonitor.exe.config"}),". Add these lines under ",(0,o.jsx)(i.code,{children:"<appSettings>"})," (update them if they already exist)."]}),"\n"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:'<add key="TCAdmin.Public.MVC" value="True" />\n<add key="TCAdmin.Public.MVC.WebServicesPath" value="../ControlPanel.MVC" />\n'})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Restart the monitor service."}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{title:"Important for Linux users",type:"danger",children:(0,o.jsxs)(i.p,{children:["Https is not supported by the built in web server when ",(0,o.jsx)(i.code,{children:"TCAdmin.Public.MVC"})," is set to True. To use https you must ",(0,o.jsx)(i.a,{href:"/customizations/web-server-configurations/setting-up-nginx",children:(0,o.jsx)(i.strong,{children:"configure your control panel with Nginx"})}),"."]})}),"\n",(0,o.jsx)(i.h2,{id:"update-the-whmcs-module-optional",children:"Update the WHMCS module (optional)"}),"\n",(0,o.jsxs)(i.p,{children:["Make a backup of your ",(0,o.jsx)(i.code,{children:"/whmcs/modules/servers/tcadmin2_advanced/tcadmin2_advanced.php"})," and replace it the one included in the tcadmin2_advanced module for MVC. This module has the links updated to work with the MVC template format. ",(0,o.jsx)(i.a,{href:"https://clients.tcadmin.com/downloads.php?action=displaycat&catid=5",children:"You can download the module from the client area"})]}),"\n",(0,o.jsx)(i.h2,{id:"linux-nginx-configuration-optional",children:"Linux Nginx configuration (optional)"}),"\n",(0,o.jsxs)(i.p,{children:["Configure Nginx with these instructions ",(0,o.jsx)(i.a,{href:"/customizations/web-server-configurations/setting-up-nginx",children:"Configure TCAdmin to run with Nginx"})]}),"\n",(0,o.jsx)(i.h2,{id:"windows-iis-configuration-optional",children:"Windows IIS configuration (optional)"}),"\n",(0,o.jsxs)(i.p,{children:["Configure the website in IIS with these instructions: ",(0,o.jsx)(i.a,{href:"/customizations/web-server-configurations/setting-up-iis",children:"Configure TCAdmin to run with IIS"})]}),"\n",(0,o.jsx)(i.h2,{id:"edit-templates-in-visual-studio-20172019",children:"Edit Templates in Visual Studio 2017/2019"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Go to ",(0,o.jsx)(i.code,{children:"settings"})," > ",(0,o.jsx)(i.code,{children:"Themes"})," > ",(0,o.jsx)(i.code,{children:"Create a new MVC theme"}),". This is the template that you will be editing in Visual Studio."]}),"\n",(0,o.jsxs)(i.li,{children:["Copy ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC"})," and ",(0,o.jsx)(i.code,{children:"TCAdmin2\\Monitor\\Shared"})," to your PC."]}),"\n",(0,o.jsxs)(i.li,{children:["Rename ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\Web.VS2017.config"})," to ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\Web.config"})]}),"\n",(0,o.jsxs)(i.li,{children:["Edit ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\Web.config"})," in notepad."]}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsxs)(i.p,{children:["We recommend ",(0,o.jsx)(i.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"})," for all configuration edits that need to be made."]})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Update the value of ",(0,o.jsx)(i.code,{children:"TCAdmin.SharedPath"})," to the correct path."]}),"\n",(0,o.jsxs)(i.li,{children:["Update ",(0,o.jsx)(i.code,{children:"TCAdmin.Database.MySql.ConnectionString"})," with your MySQL info. If the connection string is encrypted use these lines and change ",(0,o.jsx)(i.code,{children:"MYSQLIP"}),", ",(0,o.jsx)(i.code,{children:"MYSQLUSER"}),", ",(0,o.jsx)(i.code,{children:"MYSQLPASSWORD"})," and ",(0,o.jsx)(i.code,{children:"MYSQLDB"})," with the correct values. You can connect to your master's database or to a local copy."]}),"\n"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:'<add key="TCAdmin.Database.MySql.ConnectionString" value="Data Source=MYSQLIP;User Id=MYSQLUSER;Password=MYSQLPASSWORD;Database=MYSQLDB;Pooling=false;Compress=false;Connection Lifetime=900;Connect Timeout=30;Protocol=TCP" />\n<add key="TCAdmin.Database.MySql.ConnectionString.Encrypted" value="False" />\n'})}),"\n",(0,o.jsx)(i.h3,{id:"run-visual-studio",children:"Run Visual Studio"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["select ",(0,o.jsx)(i.code,{children:"File"})," > ",(0,o.jsx)(i.code,{children:"Open"})," > ",(0,o.jsx)(i.code,{children:"Web Site"}),". Select your ControlPanel.MVC folder."]}),"\n",(0,o.jsxs)(i.li,{children:["Select ",(0,o.jsx)(i.code,{children:"Website"})," > ",(0,o.jsx)(i.code,{children:"Start Options"})," from the menu."]}),"\n",(0,o.jsxs)(i.li,{children:["In Build > Before running startup page select ",(0,o.jsx)(i.code,{children:"No build"})," and click on OK. Depending on your Visual Studio version this might be in ",(0,o.jsx)(i.code,{children:"Build"})," > ",(0,o.jsx)(i.code,{children:"Configuration Manager"})," > ",(0,o.jsx)(i.code,{children:"Uncheck build next to the website"}),"."]}),"\n",(0,o.jsx)(i.li,{children:"You should be able to run the solution and it will load the control panel website."}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsx)(i.p,{children:"Only MVC content will render correctly. Classic ASP.NET content will show a server error."})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Don't edit the files from the default template. To edit a specific page copy it from ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\Views\\Default"})," to ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\Views\\(YourTemplate)"})," keeping the same directory structure. You don't need to copy all files. If a file is not in your template the default file will be used."]}),"\n",(0,o.jsxs)(i.li,{children:["You should have full intellisense support when editing the template files. If you see an errors about missing references copy the file from Shared to ",(0,o.jsx)(i.code,{children:"ControlPanel.MVC\\bin"})," and restart Visual Studio."]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"edit-templates-with-a-text-editor",children:"Edit Templates with a text editor"}),"\n",(0,o.jsx)(i.admonition,{type:"tip",children:(0,o.jsxs)(i.p,{children:["We recommend ",(0,o.jsx)(i.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"})," for all configuration edits that need to be made."]})}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Create a new theme in ",(0,o.jsx)(i.code,{children:"Settings"})," > ",(0,o.jsx)(i.code,{children:"Themes"}),". Set the type to MVC. A folder will be created in ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views"})," where you can place your custom ",(0,o.jsx)(i.code,{children:".cshtml"})," and images."]}),"\n",(0,o.jsxs)(i.li,{children:["Copy the file you want to customize from ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views\\Default"})," to ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views\\(YourTemplate)"}),". You must keep the same directory structure of the original file. For example to customize the login page copy ",(0,o.jsx)(i.code,{children:"Views\\Default\\Base\\Login\\Index.cshtml"})," to ",(0,o.jsx)(i.code,{children:"Views\\(YourTemplate)\\Base\\Login\\Index.cshtml"})," and edit ",(0,o.jsx)(i.code,{children:"Index.cshtml"})," with a text editor."]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"adding-code-to-existing-cshtml-file-without-modifying-it",children:"Adding code to existing .cshtml file without modifying it"}),"\n",(0,o.jsxs)(i.p,{children:["Each .cshtml file in TCAdmin2\\ControlPanel.MVC\\Views\\Default supports adding server and client side code using plugin files. The plugin filename should be ",(0,o.jsx)(i.code,{children:"OriginalFile.Plugin.AnyName.cshtml"}),"."]}),"\n",(0,o.jsxs)(i.admonition,{title:"example",type:"info",children:[(0,o.jsx)(i.p,{children:"if you want to add code to the HTML HEAD for a live chat software:"}),(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["The default HEAD code is in ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views\\Default\\Shared\\_Head.cshtml"})]}),"\n",(0,o.jsxs)(i.li,{children:["To add your code as a plugin you need to create a file ",(0,o.jsx)(i.code,{children:"TCAdmin2\\ControlPanel.MVC\\Views\\Default\\Shared\\_Head.Plugin.LiveChat.cshtml"})]}),"\n"]})]}),"\n",(0,o.jsx)(i.h2,{id:"going-back-to-the-classic-aspnet-themes",children:"Going back to the classic ASP.NET themes"}),"\n",(0,o.jsx)(i.p,{children:"If you want to go back to the classic ASP.NET themes:"}),"\n",(0,o.jsx)(i.h3,{id:"permanently",children:"Permanently:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Edit C:\\Program Files\\TCAdmin2\\Monitor\\TCAdminMonitor.exe.config or /home/tcadmin/Monitor/TCAdminMonitor.exe.config and set the value of TCAdmin.Public.MVC to False"}),"\n",(0,o.jsx)(i.li,{children:"Restart the monitor."}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"temporary",children:"Temporary:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Log out from the MVC panel. View ",(0,o.jsx)(i.strong,{children:(0,o.jsx)(i.code,{children:"http://x.x.x.x:8880/Aspx/"})})," (the / at the end is important) Then log in again."]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>d});var t=n(6540);const o={},s=t.createContext(o);function l(e){const i=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(s.Provider,{value:i},e.children)}},9255:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/300px-MVCPreview2-f32d71d71f74fa0cb1c62b0ac3401ffa.png"}}]);